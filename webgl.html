<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>mytitle</title>
    <meta name="description" content="" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/modern-normalize@1.1.0/modern-normalize.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <canvas id="canvas" width="500" height="380"></canvas>
    <script type="x-webgl/x-vertex-shader" id="vertexShader">
      attribute vec2 aVertexPosition
      void main() {
           gl_Position = vec4(aVertexPosition, 0.0, 1.0)
         }
    </script>
    <script type="x-webgl/x-fragment-shader" id="fragmentShader">
       uniform vec4 uColor
       void main() {
      gl_FragColor = uColor
          }
    </script>
    <script>
      const drawing = document.getElementById('canvas');
      const vertexGlsl = document.getElementById('vertexShader').text,
        fragmentGlsl = document.getElementById('fragmentShader').text;
      if (drawing.getContext) {
        const gl = drawing.getContext('webgl');
        if (gl) {
          gl.clearColor(0, 0, 0, 1);
          gl.clear(gl.COLOR_BUFFER_BIT);

          gl.viewport(0, 0, drawing.width, drawing.height);

          const buffer = gl.createBuffer();
          gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
          console.log(gl.getError());
          gl.bufferData(
            gl.ARRAY_BUFFER,
            new Float32Array([0, 0.5, 1]),
            gl.STATIC_DRAW
          );

          const vertexShader = gl.createShader(gl.VERTEX_SHADER);
          gl.shaderSource(vertexShader, vertexGlsl);
          gl.compileShader(vertexShader);
          const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
          gl.shaderSource(fragmentShader, fragmentGlsl);
          gl.compileShader(fragmentShader);

          const program = gl.createProgram();
          gl.attachShader(program, vertexShader);
          gl.attachShader(program, fragmentShader);
          gl.linkProgram(program);

          gl.useProgram(program);

          const uColor = gl.getUniformLocation(program, "uColor")
          gl.uniform4fv(uColor, [0, 0, 0, 1])
          const aVertexPosition = gl.getAttribLocation(program, "aVertexPosition")
          gl.enableVertexAttribArray(aVertexPosition)
          gl.vertexAttribPointer(aVertexPosition, 4, gl.FLOAT, false, 0, 0)

          //if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
          //  alert(gl.getShaderInfoLog(vertexShader))
          //}

          if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
            alert(gl.getProgramInfoLog(program))
          }
          let errorCode = gl.getError();
          while (errorCode) {
            console.log('Error occurred: ' + errorCode);
            errorCode = gl.getError();
          }
        }
      }
    </script>
  </body>
</html>
